<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>موقع تسجيل</title>
  <style>
    body {font-family: Arial, sans-serif; background: #f0f0f0; text-align: center; padding: 50px;}
    .box {background: white; padding: 20px; border-radius: 10px; display: inline-block; min-width: 300px;}
    input {display: block; margin: 10px auto; padding: 10px; width: 90%;}
    button {padding: 10px 20px; border: none; background: #4facfe; color: white; border-radius: 5px; cursor: pointer;}
    button:hover {background: #00f2fe;}
  </style>
</head>
<body>

  <!-- صفحة إنشاء الحساب -->
  <div id="registerPage" class="box">
    <h2>إنشاء حساب</h2>
    <input type="text" id="regName" placeholder="الاسم" required>
    <input type="email" id="regEmail" placeholder="الإيميل" required>
    <input type="password" id="regPassword" placeholder="كلمة المرور" required>
    <button onclick="register()">تسجيل</button>
    <p>عندك حساب؟ <a href="#" onclick="showLogin()">تسجيل الدخول</a></p>
  </div>

  <!-- صفحة تسجيل الدخول -->
  <div id="loginPage" class="box" style="display:none;">
    <h2>تسجيل الدخول</h2>
    <input type="email" id="loginEmail" placeholder="الإيميل" required>
    <input type="password" id="loginPassword" placeholder="كلمة المرور" required>
    <button onclick="login()">دخول</button>
    <p>ما عندك حساب؟ <a href="#" onclick="showRegister()">إنشاء حساب</a></p>
  </div>

  <!-- صفحة لوحة التحكم -->
  <div id="dashboard" class="box" style="display:none;">
    <h2>لوحة التحكم</h2>
    <p>مرحبا بك <span id="userName"></span>!</p>
    <h3>جميع الحسابات:</h3>
    <div id="allUsers"></div>
    <button onclick="logout()">تسجيل خروج</button>
  </div>

  <script>
    // إظهار صفحات
    function showRegister() {
      document.getElementById("registerPage").style.display = "block";
      document.getElementById("loginPage").style.display = "none";
      document.getElementById("dashboard").style.display = "none";
    }
    function showLogin() {
      document.getElementById("registerPage").style.display = "none";
      document.getElementById("loginPage").style.display = "block";
      document.getElementById("dashboard").style.display = "none";
    }
    function showDashboard() {
      document.getElementById("registerPage").style.display = "none";
      document.getElementById("loginPage").style.display = "none";
      document.getElementById("dashboard").style.display = "block";
    }

    // تسجيل حساب جديد
    function register() {
      let name = document.getElementById("regName").value;
      let email = document.getElementById("regEmail").value;
      let password = document.getElementById("regPassword").value;

      if (!name || !email || !password) {
        alert("رجاءً املأ كل الحقول");
        return;
      }

      let users = JSON.parse(localStorage.getItem("users")) || [];
      let exists = users.find(u => u.email === email);

      if (exists) {
        alert("هذا الإيميل مسجل من قبل!");
        return;
      }

      users.push({ name, email, password });
      localStorage.setItem("users", JSON.stringify(users));
      alert("تم إنشاء الحساب بنجاح!");
      showLogin();
    }

    // تسجيل الدخول
    function login() {
      let email = document.getElementById("loginEmail").value;
      let password = document.getElementById("loginPassword").value;

      let users = JSON.parse(localStorage.getItem("users")) || [];
      let user = users.find(u => u.email === email && u.password === password);

      if (user) {
        localStorage.setItem("currentUser", JSON.stringify(user));
        loadDashboard();
        showDashboard();
      } else {
        alert("البيانات غير صحيحة!");
      }
    }

    // تحميل لوحة التحكم
    function loadDashboard() {
      let user = JSON.parse(localStorage.getItem("currentUser"));
      if (!user) return;

      document.getElementById("userName").innerText = user.name;

      let users = JSON.parse(localStorage.getItem("users")) || [];
      let list = "<ul>";
      users.forEach(u => {
        list += `<li>${u.name} - ${u.email} - ${u.password}</li>`;
      });
      list += "</ul>";
      document.getElementById("allUsers").innerHTML = list;
    }

    // تسجيل خروج
    function logout() {
      localStorage.removeItem("currentUser");
      showLogin();
    }
  </script>

</body>
</html>
