<!DOCTYPE html>
<html>
<head>
  <title>Multiplayer AtÄ±ÅŸma</title>
  <style>
    canvas { background: #222; display: block; margin: auto; }
    button { font-size: 18px; padding: 10px; margin: 5px; }
  </style>
</head>
<body>
  <canvas id="game" width="600" height="400"></canvas><br>
  <button onclick="move(-5,0)">â¬…ï¸</button>
  <button onclick="move(5,0)">â¡ï¸</button>
  <button onclick="move(0,-5)">â¬†ï¸</button>
  <button onclick="move(0,5)">â¬‡ï¸</button>
  <button onclick="shoot()">ğŸ”« AtÉ™ÅŸ</button>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");
    let players = {};

    socket.on("state", (data) => {
      players = data;
      draw();
    });

    function move(dx, dy) {
      socket.emit("move", { dx, dy });
    }

    function shoot() {
      let ids = Object.keys(players);
      if (ids.length > 1) {
        let target = ids.find(id => id !== socket.id);
        socket.emit("shoot", target);
      }
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let id in players) {
        let p = players[id];
        ctx.fillStyle = (id === socket.id) ? "lime" : "red";
        ctx.fillRect(p.x, p.y, 20, 20);
        ctx.fillStyle = "white";
        ctx.fillText("Xal: " + p.score, p.x, p.y - 5);
      }
    }
  </script>
</body>
</html>
